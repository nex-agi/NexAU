type: tool
name: BackgroundTask
description: >-
  Manage background tasks started by the Bash tool with background=true.
  Use this tool to check the status of a running task, retrieve its output,
  kill a running task, or list all background tasks.


  Available actions:

  1. **status**: Get the current status and output of a background task.
     - Requires the `pid` returned by the Bash tool when background=true.
     - Returns the task's current status (running/success/error), stdout, stderr, and exit code.

  2. **kill**: Kill a running background task.
     - Requires the `pid` of the task to kill.
     - The task will be terminated and removed from tracking.

  3. **list**: List all tracked background tasks and their current statuses.
     - No `pid` required.
     - Returns a summary of all background tasks with their pid, command, status, and duration.


  Usage notes:
    - Always use the `pid` value returned by the Bash tool's `background_pid` field.
    - Use `list` first if you don't remember the pid of a task.
    - After killing a task, it will no longer appear in the list.
    - Finished tasks remain in the list until explicitly killed.
input_schema:
  type: object
  properties:
    action:
      type: string
      enum:
        - status
        - kill
        - list
      description: >-
        The action to perform: "status" to check a task, "kill" to terminate a
        task, or "list" to see all background tasks.
    pid:
      type: integer
      description: >-
        The process ID of the background task. Required for "status" and "kill"
        actions. This is the `background_pid` value returned by the Bash tool.
  required:
    - action
  additionalProperties: false
  $schema: http://json-schema.org/draft-07/schema#