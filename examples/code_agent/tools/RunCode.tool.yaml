name: RunCode
disable_parallel: true
description: >-
  Executes Python code blocks in a sandbox environment with proper output capture
  and error handling.

  Before executing code, please follow these guidelines:

  1. Code Block Preparation:
     - Write complete, executable Python code blocks
     - Include all necessary imports at the beginning
     - Use print() to display results
     - For visualizations, ALWAYS save plots to files

  2. Timeout Management:
     - Default timeout is 120 seconds (120000ms)
     - Maximum timeout is 10 minutes (600000ms)
     - Adjust timeout for long-running operations

  # Python Code Usage

  Basic execution:

    Example code block:
    ```python
    import pandas as pd
    import numpy as np

    # Create data
    data = np.random.randn(100, 3)
    df = pd.DataFrame(data, columns=['A', 'B', 'C'])

    # Display results
    print(df.describe())
    print(f"Shape: {df.shape}")
    print(f"Correlation matrix:\n{df.corr()}")
    ```

    For data files:
    ```python
    import os
    if os.path.exists('data.csv'):
        df = pd.read_csv('data.csv')
        print(f"Loaded {len(df)} rows from data.csv")
    else:
        print("File data.csv not found")
    ```

    For visualizations - ALWAYS save to files:
    ```python
    import matplotlib.pyplot as plt
    import numpy as np

    x = np.linspace(0, 10, 100)
    y = np.sin(x)

    plt.figure(figsize=(10, 6))
    plt.plot(x, y)
    plt.title('Sine Wave Analysis')
    plt.xlabel('X axis')
    plt.ylabel('Y axis')
    plt.grid(True)

    # ALWAYS save the plot
    plt.savefig('sine_wave_plot.png', dpi=150, bbox_inches='tight')
    plt.close()
    print("Plot saved as 'sine_wave_plot.png'")
    ```

    Install Python packages:
    ```python
    import subprocess
    subprocess.check_call(['pip', 'install', 'package_name'])
    ```

  # Important Usage Notes

  - The code_block argument is required and should contain complete Python code
  - Optional timeout in milliseconds (up to 600000ms / 10 minutes). Default is 120000ms
  - Provide a clear, concise description of what the code does in 5-10 words
  - Output exceeding 30000 characters will be truncated
  - ALWAYS save plots to files - never rely on plt.show()
  - For data results, save to CSV or JSON files
  - Handle large datasets carefully to avoid memory issues


  # Common Issues and Solutions

  1. File not found errors:
     - Use os.path.exists() to check before reading files

  2. Memory issues:
     - Delete large variables and use gc.collect()

  3. Timeout issues:
     - Break long operations into smaller chunks
     - Increase timeout parameter for known long operations
input_schema:
  type: object
  properties:
    code_block:
      type: string
      description: The Python code block to execute
    timeout:
      type: number
      description: Optional timeout in milliseconds (max 600000)
      default: 120000
    description:
      type: string
      description: |2-
        Clear, concise description of what this code does in 5-10 words. Examples:
          Input: df = pd.read_csv('data.csv')
          Output: Load data from CSV file

          Input: plt.savefig('plot.png')
          Output: Save plot to PNG file

          Input: result = sum([1, 2, 3, 4, 5])
          Output: Calculate sum of numbers
  required:
    - code_block
  additionalProperties: false
  $schema: http://json-schema.org/draft-07/schema#
