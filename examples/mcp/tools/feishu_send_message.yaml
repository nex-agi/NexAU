type: tool
name: FeishuSendMessage
description: >-
  发送消息到指定用户或群组。统一的消息发送接口，支持多种消息类型。

    参数说明：
    - receive_id: 接收者ID（群组ID一般以oc_开头，用户ID以ou_开头）
    - content: 消息内容，根据msg_type有不同格式要求
    - msg_type: 消息类型，支持text/post/image/interactive/audio/media/file/share_chat/share_user/sticker
    - receive_id_type: ID类型，通常用chat_id发送到群组，用open_id发送给用户

    使用示例：

    1. 发送文本消息：
    msg_type="text"
    content="你好，这是一条文本消息"

    2. 发送文本消息（带@功能）：
    msg_type="text"
    content='{"text":"<at user_id=\\"ou_xxxxxxxxx\\">张三</at> 你好！"}'
    # 或者直接传入文本内容（推荐）：
    content="<at user_id=\"ou_xxxxxxxxx\">张三</at> 你好！"

    3. 发送富文本消息：
    msg_type="post"
    content='{"zh_cn":{"title":"通知标题","content":[[{"tag":"text","text":"第一行："},{"tag":"a","href":"https://example.com","text":"链接文字"}],[{"tag":"text","text":"第二行：普通文本"}]]}}'

    4. 发送图片消息：
    msg_type="image"
    content='{"image_key":"img_xxxxxxxxx"}'  # 需要先调用upload_feishu_image获取image_key

    5. 发送语音消息：
    msg_type="audio"
    content='{"file_key":"file_v2_xxxxxxxxx"}'  # 需要先调用upload_feishu_file获取file_key
    只支持 opus 格式，其他格式需要先转换为 opus 格式 ffmpeg -i SourceFile.mp3 -acodec libopus -ac 1 -ar 16000 TargetFile.opus

    6. 发送视频消息：
    msg_type="media"
    content='{"file_key":"file_v2_xxxxxxxxx","image_key":"img_xxxxxxxxx"}'  # 视频文件和封面图片

    7. 发送文件消息：
    msg_type="file"
    content='{"file_key":"file_v2_xxxxxxxxx"}'

    8. 发送群名片：
    msg_type="share_chat"
    content='{"chat_id":"oc_xxxxxxxxx"}'

    9. 发送用户名片：
    msg_type="share_user"
    content='{"user_id":"ou_xxxxxxxxx"}'  # 只支持open_id

    10. 发送表情包：
    msg_type="sticker"
    content='{"file_key":"file_v2_xxxxxxxxx"}'  # 目前仅支持发送机器人收到的表情包

    11. 发送交互卡片：
    msg_type="interactive"
    content='{"config":{"wide_screen_mode":true},"elements":[{"tag":"div","text":{"content":"卡片内容","tag":"lark_md"}}]}'

    富文本格式详解：
    - 文本元素：{"tag":"text","text":"文字内容"}
    - 链接元素：{"tag":"a","href":"链接地址","text":"显示文字"}
    - @用户：{"tag":"at","user_id":"用户ID","user_name":"用户名"}
    - 图片：{"tag":"img","image_key":"图片key"}
    - 视频：{"tag":"media","file_key":"视频key","image_key":"封面key"}
    - 表情：{"tag":"emotion","emoji_type":"SMILE"}
    - 换行：每个数组元素代表一行，行内元素并排显示

    注意事项：
    - 机器人必须在被发送消息的群组中（针对群组消息）
    - 机器人必须对用户可见（针对私聊消息）
    - 所有文件、图片需要先通过对应的上传接口获取key
    - 表情包目前仅支持转发机器人收到的表情包
input_schema:
  type: object
  properties:
    receive_id:
      type: string
      description: >-
        The ID of the user or group to send the message to (must be one of the following: user_id/group_id)
    content:
      type: string
      description: >-
        The content of the message to send
    msg_type:
      type: string
      description: >-
        The type of the message to send (must be one of the following: text/post/image/interactive/audio/media/file/share_chat/share_user/sticker)
    receive_id_type:
      type: string
      description: >-
        The type of the receive_id (must be one of the following: open_id/user_id/union_id/email/chat_id)
  required:
    - receive_id
    - content
    - msg_type
    - receive_id_type
  additionalProperties: false
  $schema: http://json-schema.org/draft-07/schema#
